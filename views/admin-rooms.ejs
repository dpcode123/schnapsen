<%- include('partials/admin-head') %>

<body>

    <div class="page-container page-container-admin">
        <header class="join-header">
            <h1>Schnapsen</h1>
            <hr>
            <h2>Admin page</h2>
        </header>

        <main class="main-container">
            <h3>Active Game Rooms</h3>

            <% if (data.rooms) { %>
            
            <table id="table-admin">
                <thead>
                    <tr>
                        <th>Room #</th>
                        <th>Session</th>
                        <th>Player 1</th>
                        <th>Player 2</th>
                        <th>Game #</th>
                        <th>Deal #</th>
                    </tr>
                </thead>
                <tbody>

                    <% data.rooms.forEach(function(room){ %>
                        <tr>
                            <td><%= room.room %></td>
                            <td><%= room.playSessionUuid %></td>

                            <% if (room.players[0]) { %>
                            <td><%= room.players[0].username %></td>
                            <% } %>

                            <% if (room.players[1]) { %>
                            <td><%= room.players[1].username %></td>
                            <% } %>

                            <% if (room.bummerl) { %>
                                <td><%= room.bummerl.num %></td>
                            <% } %>

                            <% if (room.deal) { %>
                                <td><%= room.deal.num %></td>
                            <% } %>
                        </tr>
                    <% }); %>

                </tbody>
            </table>

            <% } else { %>
                <p>No active rooms.</p>
            <% } %>
                
            <p><a class="back-link" href="/admin">Back</a></p>
        </main>
    </div>

</body>

<%- include('partials/footer') %>