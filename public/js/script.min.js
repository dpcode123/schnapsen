class GameClient{constructor(t,e,r,n,a,l){this.username=t,this.userId=e,this.room=r,this.socketJwt=n,this.cardFace=a,this.cardBack=l,this.canMakeMove=!0,this.showAllWonTricks=!1}}class PlaySession{constructor(t){this.room=t.room,this.status=t.status,this.playerName=t.playerName,this.opponentName=t.opponentName,this.bummerlsLostPlayer=t.bummerlsLostPlayer,this.bummerlsLostOpponent=t.bummerlsLostOpponent}}class Bummerl{constructor(t){this.num=t.num,this.status=t.status,this.gamePointsPlayer=t.gamePointsPlayer,this.gamePointsOpponent=t.gamePointsOpponent}}class Deal{constructor(t){this.num=t.num,this.playerOnTurn=t.playerOnTurn,this.trumpCard=t.trumpCard,this.trumpSuit=t.trumpSuit,this.trickNum=t.trickNum,this.moveNum=t.moveNum,this.leadOrResponse=t.leadOrResponse,this.leadCardOnTable=t.leadCardOnTable,this.deckClosed=t.deckClosed,this.playerPoints=t.playerPoints,this.cardsInHand=t.cardsInHand,this.isThisPlayerOnTurn=t.isThisPlayerOnTurn,this.deckSize=t.deckSize,this.playerWonCards=t.playerWonCards,this.opponentWonCardsFirstTrick=t.opponentWonCardsFirstTrick,this.opponentTotalWonCardsNumber=t.opponentTotalWonCardsNumber,this.marriagesInHand=t.marriagesInHand}}class PlayerMove{constructor(t,e,r,n,a,l,s,i){this.roomId=t,this.userId=e,this.socketId=r,this.moveNum=n,this.moveType=a,this.trickNum=l,this.leadOrResponse=s,this.cardName=i}}function putCardInElement(t,e){t.setAttributeNS(null,"data-card",e),t.setAttributeNS(null,"fill",`url(#${e})`)}function removeCardFromElement(t){t.setAttributeNS(null,"data-card","none"),t.setAttributeNS(null,"fill","none")}function updateAllCardsInHand(t){for(let t=0;t<5;t++)removeCardFromElement(cardsInHand[t]);for(let e=0;e<t.length;e++)putCardInElement(cardsInHand[e],t[e].name)}function updateOpponentCards(t){hideElements(opponentCardsInHand);for(let e=0;e<t;e++)showElement(opponentCardsInHand[e])}function updatePlayerTricks(t){2===t.length?updatePlayerWonFirstTrick(t):t.length>2&&updatePlayerWonOtherTricks(t)}function updateOpponentTricks(t,e){2===e?updateOpponentWonFirstTrick(t):e>2&&updateOpponentWonOtherTricks(e)}function updatePlayerWonFirstTrick(t){for(let e=0;e<t.length;e++)showElement(wonCardsFirstTrick[e]),putCardInElement(wonCardsFirstTrick[e],t[e]),putCardInElement(wonCardsAllTricksDisplayed[e],t[e])}function updatePlayerWonOtherTricks(t){for(let e=0;e<t.length;e++)putCardInElement(wonCardsAllTricksDisplayed[e],t[e]);const e=t.length-2;for(let t=0;t<e;t++)showElement(wonCardsOtherTricksCardbacks[t])}function updateOpponentWonFirstTrick(t){for(let e=0;e<t.length;e++)showElement(opponentWonCardsFirstTrick[e]),putCardInElement(opponentWonCardsFirstTrick[e],t[e])}function updateOpponentWonOtherTricks(t){const e=t-2;for(let t=0;t<e;t++)showElement(opponentWonCardsOtherTricksCardbacks[t])}function updateCardsStackedInDeck(t){for(let e=0;e<9;e++)e>=t&&(hideElement(cardsInDeck[e]),0===t&&hideElement(trumpCard))}function updateMarriageIndicators(t,e){for(let t=0;t<4;t++)marriagesIndicator[t].textContent="";e.forEach((e=>{let r;switch(e.suit){case"herc":switch(r=t.findIndex((t=>"q-herc"===t.name)),r){case 0:marriagesIndicator[0].textContent=e.points;break;case 1:marriagesIndicator[1].textContent=e.points;break;case 2:marriagesIndicator[2].textContent=e.points;break;case 3:marriagesIndicator[3].textContent=e.points}break;case"karo":switch(r=t.findIndex((t=>"q-karo"===t.name)),r){case 0:marriagesIndicator[0].textContent=e.points;break;case 1:marriagesIndicator[1].textContent=e.points;break;case 2:marriagesIndicator[2].textContent=e.points;break;case 3:marriagesIndicator[3].textContent=e.points}break;case"pik":switch(r=t.findIndex((t=>"q-pik"===t.name)),r){case 0:marriagesIndicator[0].textContent=e.points;break;case 1:marriagesIndicator[1].textContent=e.points;break;case 2:marriagesIndicator[2].textContent=e.points;break;case 3:marriagesIndicator[3].textContent=e.points}break;case"tref":switch(r=t.findIndex((t=>"q-tref"===t.name)),r){case 0:marriagesIndicator[0].textContent=e.points;break;case 1:marriagesIndicator[1].textContent=e.points;break;case 2:marriagesIndicator[2].textContent=e.points;break;case 3:marriagesIndicator[3].textContent=e.points}}}))}function updatePoints(t){textPoints.textContent=t,t>0&&showElement(textPoints)}function updatePlayerAndOpponentGamePoints(){textPlayerGamePoints.textContent=bummerl.gamePointsPlayer,textOpponentGamePoints.textContent=bummerl.gamePointsOpponent}function updatePlayerAndOpponentBummerlDots(){textBummerlsLostPlayer.textContent="",textBummerlsLostOpponent.textContent="";for(let t=0;t<playSession.bummerlsLostPlayer;t++)textBummerlsLostPlayer.textContent+="●";for(let t=0;t<playSession.bummerlsLostOpponent;t++)textBummerlsLostOpponent.textContent+="●"}function setPlayerOnTurnIndicator(t){t?playerOnTurnIndicator.setAttributeNS(null,"fill",PLAYER_BACKGROUND_COLOR_ACTIVE):playerOnTurnIndicator.setAttributeNS(null,"fill",PLAYER_BACKGROUND_COLOR_PASSIVE)}function setPlayerOnTurnCardsOpacity(t){t?cardsInHand.forEach((t=>{t.style.opacity=1,t.style.cursor="default"})):cardsInHand.forEach((t=>{t.style.opacity=.95,t.style.cursor="default"}))}function showElement(t){t.setAttributeNS(null,"visibility","visible")}function showElements(t){t.forEach((t=>{showElement(t)}))}function hideElement(t){t.setAttributeNS(null,"visibility","hidden")}function hideElements(t){t.forEach((t=>{hideElement(t)}))}function isPlayerAllowedToMakeMove(t){let e=!1;switch(t){case"playCard":!0===deal.isThisPlayerOnTurn&&!0===gameClient.canMakeMove&&(e=!0);break;case"closeDeck":!0===deal.isThisPlayerOnTurn&&!0===gameClient.canMakeMove&&!0===deal.leadOrResponse&&!1===deal.deckClosed&&deal.deckSize>0&&(e=!0);break;case"exchangeTrump":!0===deal.isThisPlayerOnTurn&&!0===gameClient.canMakeMove&&!1===deal.deckClosed&&(e=!0)}return e}function cardHover(t){isPlayerAllowedToMakeMove("playCard")?(t.style.opacity=.9,t.style.cursor="grab"):t.style.cursor="not-allowed"}function cardHoverOut(t){isPlayerAllowedToMakeMove("playCard")&&(t.style.opacity=1,t.style.cursor="default")}function hoverExchangeTrump(t){isPlayerAllowedToMakeMove("exchangeTrump")&&(t.style.opacity=1,t.style.cursor="grab")}function hoverOutExchangeTrump(t){isPlayerAllowedToMakeMove("exchangeTrump")&&(t.style.opacity=.6,t.style.cursor="default")}function hoverCloseDeck(t){isPlayerAllowedToMakeMove("closeDeck")?(t.style.opacity=.9,t.style.cursor="grab"):t.style.cursor="not-allowed"}function hoverOutCloseDeck(t){isPlayerAllowedToMakeMove("closeDeck")&&(t.style.opacity=1,t.style.cursor="default")}function hoverForbiddenCardOverlay(t){t.style.cursor="not-allowed"}function hoverOutForbiddenCardOverlay(t){t.style.cursor="default"}function setupGameScreenWaiting(){showElement(textAlert)}function cleanupGameScreen(){hideElement(textAlert),hideElement(textRoomId),hideElement(cardPlayedByPlayer),hideElement(cardPlayedByOpponent),hideElement(trumpCard),hideElement(textPoints),hideElement(marriagesCalledThisTrickByOpponent),hideElements(forbiddenCardOverlay),hideElements(wonCardsFirstTrick),hideElements(wonCardsOtherTricksCardbacks),hideElements(wonCardsAllTricksDisplayed),hideElements(opponentWonCardsFirstTrick),hideElements(opponentWonCardsOtherTricksCardbacks)}function setupGameScreenStarted(){cleanupGameScreen(),showElements(cardsInHand),showElements(opponentCardsInHand),putCardInElement(trumpCard,deal.trumpCard.name),showElement(trumpCard),showElements(cardsInDeck),showElement(textPlayerName),showElement(textOpponentName),showElement(textPlayerGamePoints),showElement(textOpponentGamePoints),refreshPlayerOnTurnIndicator(deal.isThisPlayerOnTurn)}function refreshPlayerOnTurnIndicator(t){setPlayerOnTurnIndicator(t),setPlayerOnTurnCardsOpacity(t)}function updateClientGameScreen(){deal.deckClosed?(svg.removeChild(trumpCard),svg.appendChild(trumpCard),svg.removeChild(textAlert),svg.appendChild(textAlert)):(svg.removeChild(trumpCard),svg.appendChild(trumpCard),cardsInDeck.forEach((t=>{svg.removeChild(t)})),cardsInDeck.forEach((t=>{svg.appendChild(t)})),svg.removeChild(textAlert),svg.appendChild(textAlert)),cleanupGameScreen(),refreshPlayerOnTurnIndicator(deal.isThisPlayerOnTurn),updateAllCardsInHand(deal.cardsInHand),showElements(cardsInHand),updateOpponentCards(deal.cardsInHand.length),showElements(opponentCardsInHand),deal.trumpCard&&"none"!==deal.trumpCard&&(putCardInElement(trumpCard,deal.trumpCard.name),showElement(trumpCard)),updateExchangeTrumpButton(deal.cardsInHand,deal.trumpSuit),updatePoints(deal.playerPoints),!1===deal.leadOrResponse&&(deal.isThisPlayerOnTurn?(putCardInElement(cardPlayedByOpponent,deal.leadCardOnTable),showElement(cardPlayedByOpponent)):(putCardInElement(cardPlayedByPlayer,deal.leadCardOnTable),showElement(cardPlayedByPlayer))),updateMarriageIndicators(deal.cardsInHand,deal.marriagesInHand),updateCardsStackedInDeck(deal.deckSize),showElements(cardsInDeck),updatePlayerTricks(deal.playerWonCards),updateOpponentTricks(deal.opponentWonCardsFirstTrick,deal.opponentTotalWonCardsNumber),showElement(textPlayerName),showElement(textOpponentName),showElement(textPlayerGamePoints),showElement(textOpponentGamePoints),deal.playerPoints>0&&showElement(textPoints),updatePlayerAndOpponentBummerlDots()}function toggleShowAllTricks(){hideElements(wonCardsFirstTrick),hideElements(wonCardsOtherTricksCardbacks);for(let t=0;t<deal.playerWonCards.length;t++)showElement(wonCardsAllTricksDisplayed[t]);gameClient.showAllWonTricks=!0}function toggleHideAllTricks(){gameClient.showAllWonTricks&&(hideAllTricks(),delay(500).then((()=>{gameClient.showAllWonTricks=!1})))}function hideAllTricks(){if(2===deal.playerWonCards.length)showElements(wonCardsFirstTrick);else if(deal.playerWonCards.length>2){showElements(wonCardsFirstTrick);for(let t=0;t<deal.playerWonCards.length-2;t++)showElement(wonCardsOtherTricksCardbacks[t])}hideElements(wonCardsAllTricksDisplayed)}function updateExchangeTrumpButton(t,e){if(deal.isThisPlayerOnTurn&&gameClient.canMakeMove&&deal.leadOrResponse&&void 0!==deal.trumpCard&&"J"!==deal.trumpCard.tier&&deal.deckSize>0){const r=`j-${e}`;jackPositionInHand=t.findIndex((t=>t.name===r)),-1!==jackPositionInHand&&(exchangeTrumpCardRect.setAttributeNS(null,"x",parseInt(cardsInHand[jackPositionInHand].getAttribute("x"),10)+32),exchangeTrumpCardRect.setAttributeNS(null,"y",parseInt(cardsInHand[jackPositionInHand].getAttribute("y"),10)-30),exchangeTrumpCardText.setAttributeNS(null,"x",parseInt(cardsInHand[jackPositionInHand].getAttribute("x"),10)+38),exchangeTrumpCardText.setAttributeNS(null,"y",parseInt(cardsInHand[jackPositionInHand].getAttribute("y"),10)+2),exchangeTrumpCardButton.setAttributeNS(null,"visibility","visible"))}else exchangeTrumpCardButton.setAttributeNS(null,"visibility","hidden")}function throwCardOnTheTable(t){cardPlayedByPlayer.setAttributeNS(null,"fill",`url(#${t})`),showElement(cardPlayedByPlayer)}function getCardPositionInHandByName(t,e){return e.findIndex((e=>e.name===t))}function disableForbiddenCards(t,e){t.forEach((r=>{if(e.some((t=>t.name===r.name)));else{const e=getCardPositionInHandByName(r.name,t);showElement(forbiddenCardOverlay[e])}}))}const socket=io(),gameClient=new GameClient(passedUsername,passedUserId,passedRoom,passedSocketJwt,passedUserCardFace,passedUserCardBack);let playSession,bummerl,deal;function updateClientGameState(t){deal.num=t.num,deal.playerOnTurn=t.playerOnTurn,deal.trumpCard=t.trumpCard,deal.trumpSuit=t.trumpSuit,deal.trickNum=t.trickNum,deal.moveNum=t.moveNum,deal.leadOrResponse=t.leadOrResponse,deal.leadCardOnTable=t.leadCardOnTable,deal.deckClosed=t.deckClosed,deal.playerPoints=t.playerPoints,deal.cardsInHand=t.cardsInHand,deal.isThisPlayerOnTurn=t.isThisPlayerOnTurn,deal.deckSize=t.deckSize,deal.playerWonCards=t.playerWonCards,deal.opponentWonCardsFirstTrick=t.opponentWonCardsFirstTrick,deal.opponentTotalWonCardsNumber=t.opponentTotalWonCardsNumber,deal.marriagesInHand=t.marriagesInHand}function movePlayCard(t){if(deal.isThisPlayerOnTurn&&gameClient.canMakeMove){const e=t.getAttribute("data-card");emptyPlaceInHand(t),throwCardOnTheTable(e);const r=new PlayerMove(gameClient.room,gameClient.userId,socket.id,deal.moveNum,"playCard",deal.trickNum,deal.leadOrResponse,e);gameClient.canMakeMove=!1,sendMove(r),t.style.opacity=1,hideAllTricks()}}function moveExchangeTrump(){deal.isThisPlayerOnTurn&&gameClient.canMakeMove&&(playerMove=new PlayerMove(gameClient.room,gameClient.userId,socket.id,deal.moveNum,"exchangeTrump",deal.trickNum,deal.leadOrResponse,null),sendMove(playerMove))}function moveCloseDeck(){isPlayerAllowedToMakeMove("closeDeck")&&(playerMove=new PlayerMove(gameClient.room,gameClient.userId,socket.id,deal.moveNum,"closeDeck",deal.trickNum,deal.leadOrResponse,null),sendMove(playerMove))}function emptyPlaceInHand(t){t.setAttributeNS(null,"data-card","none"),t.setAttributeNS(null,"fill","none")}function sendMove(t){const e=gameClient.socketJwt;socket.emit("clientMove",{socketJwt:e,playerMove:t})}function delay(t){return new Promise((e=>setTimeout(e,t)))}function getRandomInt(t){return Math.floor(Math.random()*Math.floor(t))}socket.emit("init",gameClient.socketJwt);const svg=document.getElementById("svg-content"),XMLNS="http://www.w3.org/2000/svg",CARD_WIDTH=144,CARD_HEIGHT=216,CARD_ROUND=10,CARD_STROKE_WIDTH=1,CARD_STROKE_OPACITY=0,PLAYER_CARDS_Y_POSITION=320,OPPONENT_CARDS_Y_POSITION=-160,DECK_CARDS_X_POSITION=680,DECK_CARDS_Y_POSITION=80,TRUMP_CARD_X_POSITION=-260,TRUMP_CARD_Y_POSITION=560,PLAYER_WON_TRICK_CARDS_HIDDEN_X_POSITION=997,PLAYER_WON_TRICK_CARDS_HIDDEN_Y_POSITION=-500,PLAYER_WON_TRICK_CARDS_SHOW_ALL_Y_POSITION=280,OPPONENT_WON_TRICK_CARDS_HIDDEN_X_POSITION=-60,OPPONENT_WON_TRICK_CARDS_HIDDEN_Y_POSITION=-1065,MARRIAGES_0_X_POSITION=130,MARRIAGES_X_DISTANCE_TO_NEXT=144,MARRIAGES_Y_POSITION=320,MARRIAGES_FONT_SIZE="24px",MARRIAGES_FONT_COLOR="#52514e",PLAYER_NAME_AND_POINTS_FONT_SIZE="28px",PREFERRED_CARD_FACE=gameClient.cardFace,PREFERRED_CARD_BACK=gameClient.cardBack,CARD_FACE_IMG_FOLDER=`../img/cards/face/${PREFERRED_CARD_FACE}`,CARD_BACK_IMG_FOLDER=`../img/cards/back/${PREFERRED_CARD_BACK}`,PLAYER_BACKGROUND_COLOR_ACTIVE="#97c39d",PLAYER_BACKGROUND_COLOR_PASSIVE="#b0bdbd",cardSuits=["herc","karo","pik","tref"],cardTiers=["j","q","k","x","a"],cardPatterns=[];cardSuits.forEach((t=>{cardTiers.forEach((e=>{cardPatterns.push(e+"-"+t)}))}));const defs=document.getElementById("defs");cardPatterns.forEach((t=>{const e=document.createElementNS(XMLNS,"pattern"),r=document.createElementNS(XMLNS,"image");e.setAttributeNS(null,"id",t),e.setAttributeNS(null,"patternUnits","objectBoundingBox"),e.setAttributeNS(null,"width",1),e.setAttributeNS(null,"height",1),r.setAttributeNS(null,"href",`${CARD_FACE_IMG_FOLDER}/${t}.png`),r.setAttributeNS(null,"x",0),r.setAttributeNS(null,"y",0),r.setAttributeNS(null,"width",144),r.setAttributeNS(null,"height",216),e.appendChild(r),defs.appendChild(e)}));const cardBackPattern=document.createElementNS(XMLNS,"pattern"),cardBackimage=document.createElementNS(XMLNS,"image");let clientGUI_cardPlayedByOpponent,clientGUI_cardPlayedByPlayer,clientGUI_cardsInDeck,clientGUI_cardsInHand,clientGUI_exchangeTrumpCardButton,clientGUI_exitButton,clientGUI_forbiddenCardOverlay,clientGUI_marriagesCalledThisTrickByOpponent,clientGUI_marriagesIndicator,clientGUI_opponentCardsInHand,clientGUI_opponentWonCardsFirstTrick,clientGUI_opponentWonCardsOtherTricksCardbacks,clientGUI_playerOnTurnIndicator,clientGUI_textAlert,clientGUI_textBummerlsLostOpponent,clientGUI_textBummerlsLostPlayer,clientGUI_textOpponentGamePoints,clientGUI_textOpponentName,clientGUI_textPlayerGamePoints,clientGUI_textPlayerName,clientGUI_textRoomId,clientGUI_trumpCard,clientGUI_wonCardsAllTricksDisplayed,clientGUI_wonCardsFirstTrick,clientGUI_wonCardsOtherTricksCardbacks;cardBackPattern.setAttributeNS(null,"id","cardback"),cardBackPattern.setAttributeNS(null,"patternUnits","objectBoundingBox"),cardBackPattern.setAttributeNS(null,"width",1),cardBackPattern.setAttributeNS(null,"height",1),cardBackimage.setAttributeNS(null,"href",`${CARD_BACK_IMG_FOLDER}/cardback.png`),cardBackimage.setAttributeNS(null,"x",0),cardBackimage.setAttributeNS(null,"y",0),cardBackimage.setAttributeNS(null,"width",144),cardBackimage.setAttributeNS(null,"height",216),cardBackPattern.appendChild(cardBackimage),defs.appendChild(cardBackPattern);const ALL_GUI_ELEMENTS=[];let playerOnTurnIndicator;const cardsInHand=[],opponentCardsInHand=[];let cardPlayedByPlayer,cardPlayedByOpponent,marriagesCalledThisTrickByOpponent,trumpCard;const cardsInDeck=[],wonCardsFirstTrick=[],wonCardsOtherTricksCardbacks=[],wonCardsAllTricksDisplayed=[],opponentWonCardsFirstTrick=[],opponentWonCardsOtherTricksCardbacks=[];let textRoomId,textAlert,textPoints,textPlayerName,textOpponentName,textPlayerGamePoints,textOpponentGamePoints,textBummerlsLostPlayer,textBummerlsLostOpponent;const marriagesIndicator=[],forbiddenCardOverlay=[];let exchangeTrumpCardRect,exchangeTrumpCardText,exchangeTrumpCardButton;playerOnTurnIndicator=document.createElementNS(XMLNS,"rect"),playerOnTurnIndicator.setAttributeNS(null,"x",0),playerOnTurnIndicator.setAttributeNS(null,"y",0),playerOnTurnIndicator.setAttributeNS(null,"width",1080),playerOnTurnIndicator.setAttributeNS(null,"height",540),playerOnTurnIndicator.setAttributeNS(null,"fill",PLAYER_BACKGROUND_COLOR_ACTIVE),playerOnTurnIndicator.setAttributeNS(null,"fill-opacity",1);for(let t=0;t<5;t++)cardsInHand[t]=document.createElementNS(XMLNS,"rect"),cardsInHand[t].setAttributeNS(null,"x",144*t),cardsInHand[t].setAttributeNS(null,"y",320),cardsInHand[t].setAttributeNS(null,"rx",10),cardsInHand[t].setAttributeNS(null,"ry",10),cardsInHand[t].setAttributeNS(null,"width",144),cardsInHand[t].setAttributeNS(null,"height",216),cardsInHand[t].setAttributeNS(null,"stroke","black"),cardsInHand[t].setAttributeNS(null,"stroke-width",1),cardsInHand[t].setAttributeNS(null,"stroke-opacity",0),cardsInHand[t].setAttributeNS(null,"fill","url(#cardback)"),cardsInHand[t].setAttributeNS(null,"visibility","hidden");for(let t=0;t<5;t++)opponentCardsInHand[t]=document.createElementNS(XMLNS,"rect"),opponentCardsInHand[t].setAttributeNS(null,"x",144*t),opponentCardsInHand[t].setAttributeNS(null,"y",-160),opponentCardsInHand[t].setAttributeNS(null,"rx",10),opponentCardsInHand[t].setAttributeNS(null,"ry",10),opponentCardsInHand[t].setAttributeNS(null,"width",144),opponentCardsInHand[t].setAttributeNS(null,"height",216),opponentCardsInHand[t].setAttributeNS(null,"stroke","black"),opponentCardsInHand[t].setAttributeNS(null,"stroke-width",1),opponentCardsInHand[t].setAttributeNS(null,"stroke-opacity",0),opponentCardsInHand[t].setAttributeNS(null,"fill","url(#cardback)"),opponentCardsInHand[t].setAttributeNS(null,"visibility","hidden");cardPlayedByPlayer=document.createElementNS(XMLNS,"rect"),cardPlayedByPlayer.setAttributeNS(null,"x",350),cardPlayedByPlayer.setAttributeNS(null,"y",90),cardPlayedByPlayer.setAttributeNS(null,"rx",10),cardPlayedByPlayer.setAttributeNS(null,"ry",10),cardPlayedByPlayer.setAttributeNS(null,"width",144),cardPlayedByPlayer.setAttributeNS(null,"height",216),cardPlayedByPlayer.setAttributeNS(null,"stroke","black"),cardPlayedByPlayer.setAttributeNS(null,"stroke-width",1),cardPlayedByPlayer.setAttributeNS(null,"stroke-opacity",0),cardPlayedByPlayer.setAttributeNS(null,"fill","url(#cardback)"),cardPlayedByPlayer.setAttributeNS(null,"visibility","hidden"),cardPlayedByOpponent=document.createElementNS(XMLNS,"rect"),cardPlayedByOpponent.setAttributeNS(null,"x",-340),cardPlayedByOpponent.setAttributeNS(null,"y",-280),cardPlayedByOpponent.setAttributeNS(null,"rx",10),cardPlayedByOpponent.setAttributeNS(null,"ry",10),cardPlayedByOpponent.setAttributeNS(null,"width",144),cardPlayedByOpponent.setAttributeNS(null,"height",216),cardPlayedByOpponent.setAttributeNS(null,"stroke","black"),cardPlayedByOpponent.setAttributeNS(null,"stroke-width",1),cardPlayedByOpponent.setAttributeNS(null,"stroke-opacity",0),cardPlayedByOpponent.setAttributeNS(null,"transform","rotate(180)"),cardPlayedByOpponent.setAttributeNS(null,"fill","url(#cardback)"),cardPlayedByOpponent.setAttributeNS(null,"visibility","hidden"),marriagesCalledThisTrickByOpponent=document.createElementNS(XMLNS,"text"),marriagesCalledThisTrickByOpponent.setAttributeNS(null,"x",290),marriagesCalledThisTrickByOpponent.setAttributeNS(null,"y",300),marriagesCalledThisTrickByOpponent.setAttributeNS(null,"font-size","36px"),marriagesCalledThisTrickByOpponent.setAttributeNS(null,"fill","blue"),marriagesCalledThisTrickByOpponent.setAttributeNS(null,"visibility","hidden"),marriagesCalledThisTrickByOpponent.textContent="",trumpCard=document.createElementNS(XMLNS,"rect"),trumpCard.setAttributeNS(null,"x",-260),trumpCard.setAttributeNS(null,"y",560),trumpCard.setAttributeNS(null,"rx",10),trumpCard.setAttributeNS(null,"ry",10),trumpCard.setAttributeNS(null,"width",144),trumpCard.setAttributeNS(null,"height",216),trumpCard.setAttributeNS(null,"stroke","black"),trumpCard.setAttributeNS(null,"stroke-width",1),trumpCard.setAttributeNS(null,"stroke-opacity",0),trumpCard.setAttributeNS(null,"fill","url(#cardback)"),trumpCard.setAttributeNS(null,"transform","rotate(270)"),trumpCard.setAttributeNS(null,"visibility","hidden");for(let t=0;t<9;t++)cardsInDeck[t]=document.createElementNS(XMLNS,"rect"),cardsInDeck[t].setAttributeNS(null,"x",680+5*t),cardsInDeck[t].setAttributeNS(null,"y",80),cardsInDeck[t].setAttributeNS(null,"rx",10),cardsInDeck[t].setAttributeNS(null,"ry",10),cardsInDeck[t].setAttributeNS(null,"width",144),cardsInDeck[t].setAttributeNS(null,"height",216),cardsInDeck[t].setAttributeNS(null,"stroke","black"),cardsInDeck[t].setAttributeNS(null,"stroke-width",1),cardsInDeck[t].setAttributeNS(null,"stroke-opacity",0),cardsInDeck[t].setAttributeNS(null,"fill","url(#cardback)"),cardsInDeck[t].setAttributeNS(null,"visibility","hidden");wonCardsFirstTrick[0]=document.createElementNS(XMLNS,"rect"),wonCardsFirstTrick[0].setAttributeNS(null,"x",28),wonCardsFirstTrick[0].setAttributeNS(null,"y",928),wonCardsFirstTrick[0].setAttributeNS(null,"rx",10),wonCardsFirstTrick[0].setAttributeNS(null,"ry",10),wonCardsFirstTrick[0].setAttributeNS(null,"width",144),wonCardsFirstTrick[0].setAttributeNS(null,"height",216),wonCardsFirstTrick[0].setAttributeNS(null,"stroke","black"),wonCardsFirstTrick[0].setAttributeNS(null,"stroke-width",1),wonCardsFirstTrick[0].setAttributeNS(null,"stroke-opacity",0),wonCardsFirstTrick[0].setAttributeNS(null,"fill","url(#cardback)"),wonCardsFirstTrick[0].setAttributeNS(null,"transform","rotate(-60)"),wonCardsFirstTrick[0].setAttributeNS(null,"visibility","hidden"),wonCardsFirstTrick[1]=document.createElementNS(XMLNS,"rect"),wonCardsFirstTrick[1].setAttributeNS(null,"x",785),wonCardsFirstTrick[1].setAttributeNS(null,"y",542),wonCardsFirstTrick[1].setAttributeNS(null,"rx",10),wonCardsFirstTrick[1].setAttributeNS(null,"ry",10),wonCardsFirstTrick[1].setAttributeNS(null,"width",144),wonCardsFirstTrick[1].setAttributeNS(null,"height",216),wonCardsFirstTrick[1].setAttributeNS(null,"stroke","black"),wonCardsFirstTrick[1].setAttributeNS(null,"stroke-width",1),wonCardsFirstTrick[1].setAttributeNS(null,"stroke-opacity",0),wonCardsFirstTrick[1].setAttributeNS(null,"fill","url(#cardback)"),wonCardsFirstTrick[1].setAttributeNS(null,"transform","rotate(-15)"),wonCardsFirstTrick[1].setAttributeNS(null,"visibility","hidden");for(let t=0;t<14;t++)wonCardsOtherTricksCardbacks[t]=document.createElementNS(XMLNS,"rect"),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"x",997+5*t),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"y",-500),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"rx",10),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"ry",10),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"width",144),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"height",216),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"stroke","black"),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"stroke-width",1),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"stroke-opacity",0),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"fill","url(#cardback)"),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"transform","rotate(45)"),wonCardsOtherTricksCardbacks[t].setAttributeNS(null,"visibility","hidden");for(let t=0;t<5;t++)wonCardsAllTricksDisplayed[t]=document.createElementNS(XMLNS,"rect"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"x",750+60*t),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"y",280),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"rx",10),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"ry",10),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"width",144),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"height",216),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke","black"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke-width",1),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke-opacity",0),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"fill","url(#cardback)"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"visibility","hidden");for(let t=5;t<10;t++)wonCardsAllTricksDisplayed[t]=document.createElementNS(XMLNS,"rect"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"x",450+60*t),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"y",380),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"rx",10),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"ry",10),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"width",144),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"height",216),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke","black"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke-width",1),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke-opacity",0),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"fill","url(#cardback)"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"visibility","hidden");for(let t=10;t<16;t++)wonCardsAllTricksDisplayed[t]=document.createElementNS(XMLNS,"rect"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"x",150+60*t),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"y",480),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"rx",10),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"ry",10),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"width",144),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"height",216),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke","black"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke-width",1),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"stroke-opacity",0),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"fill","url(#cardback)"),wonCardsAllTricksDisplayed[t].setAttributeNS(null,"visibility","hidden");opponentWonCardsFirstTrick[0]=document.createElementNS(XMLNS,"rect"),opponentWonCardsFirstTrick[0].setAttributeNS(null,"x",-1e3),opponentWonCardsFirstTrick[0].setAttributeNS(null,"y",-470),opponentWonCardsFirstTrick[0].setAttributeNS(null,"rx",10),opponentWonCardsFirstTrick[0].setAttributeNS(null,"ry",10),opponentWonCardsFirstTrick[0].setAttributeNS(null,"width",144),opponentWonCardsFirstTrick[0].setAttributeNS(null,"height",216),opponentWonCardsFirstTrick[0].setAttributeNS(null,"stroke","black"),opponentWonCardsFirstTrick[0].setAttributeNS(null,"stroke-width",1),opponentWonCardsFirstTrick[0].setAttributeNS(null,"stroke-opacity",0),opponentWonCardsFirstTrick[0].setAttributeNS(null,"fill","url(#cardback)"),opponentWonCardsFirstTrick[0].setAttributeNS(null,"transform","rotate(165)"),opponentWonCardsFirstTrick[0].setAttributeNS(null,"visibility","hidden"),opponentWonCardsFirstTrick[1]=document.createElementNS(XMLNS,"rect"),opponentWonCardsFirstTrick[1].setAttributeNS(null,"x",-1e3),opponentWonCardsFirstTrick[1].setAttributeNS(null,"y",30),opponentWonCardsFirstTrick[1].setAttributeNS(null,"rx",10),opponentWonCardsFirstTrick[1].setAttributeNS(null,"ry",10),opponentWonCardsFirstTrick[1].setAttributeNS(null,"width",144),opponentWonCardsFirstTrick[1].setAttributeNS(null,"height",216),opponentWonCardsFirstTrick[1].setAttributeNS(null,"stroke","black"),opponentWonCardsFirstTrick[1].setAttributeNS(null,"stroke-width",1),opponentWonCardsFirstTrick[1].setAttributeNS(null,"stroke-opacity",0),opponentWonCardsFirstTrick[1].setAttributeNS(null,"fill","url(#cardback)"),opponentWonCardsFirstTrick[1].setAttributeNS(null,"transform","rotate(195)"),opponentWonCardsFirstTrick[1].setAttributeNS(null,"visibility","hidden");for(let t=0;t<14;t++)opponentWonCardsOtherTricksCardbacks[t]=document.createElementNS(XMLNS,"rect"),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"x",-60-5*t),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"y",-1065),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"rx",10),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"ry",10),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"width",144),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"height",216),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"stroke","black"),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"stroke-width",1),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"stroke-opacity",0),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"fill","url(#cardback)"),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"transform","rotate(90)"),opponentWonCardsOtherTricksCardbacks[t].setAttributeNS(null,"visibility","hidden");textRoomId=document.createElementNS(XMLNS,"text"),textRoomId.setAttributeNS(null,"x",380),textRoomId.setAttributeNS(null,"y",80),textRoomId.setAttributeNS(null,"font-size","48px"),textRoomId.setAttributeNS(null,"fill","black"),textRoomId.textContent="",textAlert=document.createElementNS(XMLNS,"text"),textAlert.setAttributeNS(null,"x",150),textAlert.setAttributeNS(null,"y",310),textAlert.setAttributeNS(null,"font-size","72px"),textAlert.setAttributeNS(null,"fill","black"),textAlert.textContent="",textPoints=document.createElementNS(XMLNS,"text"),textPoints.setAttributeNS(null,"x",875),textPoints.setAttributeNS(null,"y",275),textPoints.setAttributeNS(null,"font-size","36px"),textPoints.setAttributeNS(null,"fill","black"),textPoints.setAttributeNS(null,"visibility","hidden"),textPoints.textContent="0",textPlayerName=document.createElementNS(XMLNS,"text"),textPlayerName.setAttributeNS(null,"x",40),textPlayerName.setAttributeNS(null,"y",260),textPlayerName.setAttributeNS(null,"font-size","28px"),textPlayerName.setAttributeNS(null,"fill","black"),textPlayerName.textContent="Player",textPlayerName.setAttributeNS(null,"visibility","hidden"),textOpponentName=document.createElementNS(XMLNS,"text"),textOpponentName.setAttributeNS(null,"x",40),textOpponentName.setAttributeNS(null,"y",200),textOpponentName.setAttributeNS(null,"font-size","28px"),textOpponentName.setAttributeNS(null,"fill","black"),textOpponentName.textContent="Opponent",textOpponentName.setAttributeNS(null,"visibility","hidden"),textPlayerGamePoints=document.createElementNS(XMLNS,"text"),textPlayerGamePoints.setAttributeNS(null,"x",10),textPlayerGamePoints.setAttributeNS(null,"y",260),textPlayerGamePoints.setAttributeNS(null,"font-size","28px"),textPlayerGamePoints.setAttributeNS(null,"font-weight","bold"),textPlayerGamePoints.setAttributeNS(null,"fill","black"),textPlayerGamePoints.textContent="0",textPlayerGamePoints.setAttributeNS(null,"visibility","hidden"),textOpponentGamePoints=document.createElementNS(XMLNS,"text"),textOpponentGamePoints.setAttributeNS(null,"x",10),textOpponentGamePoints.setAttributeNS(null,"y",200),textOpponentGamePoints.setAttributeNS(null,"font-size","28px"),textOpponentGamePoints.setAttributeNS(null,"font-weight","bold"),textOpponentGamePoints.setAttributeNS(null,"fill","black"),textOpponentGamePoints.textContent="0",textOpponentGamePoints.setAttributeNS(null,"visibility","hidden"),textBummerlsLostPlayer=document.createElementNS(XMLNS,"text"),textBummerlsLostPlayer.setAttributeNS(null,"x",10),textBummerlsLostPlayer.setAttributeNS(null,"y",285),textBummerlsLostPlayer.setAttributeNS(null,"font-size","28px"),textBummerlsLostPlayer.setAttributeNS(null,"fill","black"),textBummerlsLostPlayer.textContent="",textBummerlsLostOpponent=document.createElementNS(XMLNS,"text"),textBummerlsLostOpponent.setAttributeNS(null,"x",10),textBummerlsLostOpponent.setAttributeNS(null,"y",170),textBummerlsLostOpponent.setAttributeNS(null,"font-size","28px"),textBummerlsLostOpponent.setAttributeNS(null,"fill","black"),textBummerlsLostOpponent.textContent="";for(let t=0;t<4;t++)marriagesIndicator[t]=document.createElementNS(XMLNS,"text"),marriagesIndicator[t].setAttributeNS(null,"x",130+144*t),marriagesIndicator[t].setAttributeNS(null,"y",320),marriagesIndicator[t].setAttributeNS(null,"font-size","24px"),marriagesIndicator[t].setAttributeNS(null,"fill","#52514e"),marriagesIndicator[t].textContent="";for(let t=0;t<5;t++)forbiddenCardOverlay[t]=document.createElementNS(XMLNS,"rect"),forbiddenCardOverlay[t].setAttributeNS(null,"x",cardsInHand[t].getAttribute("x")),forbiddenCardOverlay[t].setAttributeNS(null,"y",cardsInHand[t].getAttribute("y")),forbiddenCardOverlay[t].setAttributeNS(null,"rx",10),forbiddenCardOverlay[t].setAttributeNS(null,"ry",10),forbiddenCardOverlay[t].setAttributeNS(null,"width",144),forbiddenCardOverlay[t].setAttributeNS(null,"height",216),forbiddenCardOverlay[t].setAttributeNS(null,"stroke","black"),forbiddenCardOverlay[t].setAttributeNS(null,"stroke-width",1),forbiddenCardOverlay[t].setAttributeNS(null,"stroke-opacity",0),forbiddenCardOverlay[t].setAttributeNS(null,"fill","red"),forbiddenCardOverlay[t].setAttributeNS(null,"visibility","hidden"),forbiddenCardOverlay[t].setAttributeNS(null,"opacity",.4);exchangeTrumpCardRect=document.createElementNS(XMLNS,"rect"),exchangeTrumpCardRect.setAttributeNS(null,"x",0),exchangeTrumpCardRect.setAttributeNS(null,"y",0),exchangeTrumpCardRect.setAttributeNS(null,"rx",10),exchangeTrumpCardRect.setAttributeNS(null,"ry",10),exchangeTrumpCardRect.setAttributeNS(null,"width",76),exchangeTrumpCardRect.setAttributeNS(null,"height",32),exchangeTrumpCardRect.setAttributeNS(null,"stroke","black"),exchangeTrumpCardRect.setAttributeNS(null,"stroke-width",1),exchangeTrumpCardRect.setAttributeNS(null,"stroke-opacity",1),exchangeTrumpCardRect.setAttributeNS(null,"fill","none"),exchangeTrumpCardText=document.createElementNS(XMLNS,"text"),exchangeTrumpCardText.setAttributeNS(null,"x",0),exchangeTrumpCardText.setAttributeNS(null,"y",0),exchangeTrumpCardText.setAttributeNS(null,"font-size","48px"),exchangeTrumpCardText.setAttributeNS(null,"fill","black"),exchangeTrumpCardText.textContent="<->",exchangeTrumpCardButton=document.createElementNS(XMLNS,"g"),exchangeTrumpCardButton.setAttributeNS(null,"opacity",.6),exchangeTrumpCardButton.setAttributeNS(null,"visibility","hidden"),exchangeTrumpCardButton.appendChild(exchangeTrumpCardRect),exchangeTrumpCardButton.appendChild(exchangeTrumpCardText),exitButton=document.createElementNS(XMLNS,"text"),exitButton.setAttributeNS(null,"x",1052),exitButton.setAttributeNS(null,"y",30),exitButton.setAttributeNS(null,"font-size","48px"),exitButton.setAttributeNS(null,"font-weight","bold"),exitButton.setAttributeNS(null,"fill","black"),exitButton.textContent="×",ALL_GUI_ELEMENTS.push(playerOnTurnIndicator),cardsInHand.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),opponentCardsInHand.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),ALL_GUI_ELEMENTS.push(cardPlayedByPlayer),ALL_GUI_ELEMENTS.push(cardPlayedByOpponent),ALL_GUI_ELEMENTS.push(marriagesCalledThisTrickByOpponent),ALL_GUI_ELEMENTS.push(trumpCard),cardsInDeck.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),wonCardsFirstTrick.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),wonCardsOtherTricksCardbacks.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),wonCardsAllTricksDisplayed.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),opponentWonCardsFirstTrick.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),opponentWonCardsOtherTricksCardbacks.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),ALL_GUI_ELEMENTS.push(textRoomId),ALL_GUI_ELEMENTS.push(textAlert),ALL_GUI_ELEMENTS.push(textPoints),ALL_GUI_ELEMENTS.push(textPlayerName),ALL_GUI_ELEMENTS.push(textOpponentName),ALL_GUI_ELEMENTS.push(textPlayerGamePoints),ALL_GUI_ELEMENTS.push(textOpponentGamePoints),ALL_GUI_ELEMENTS.push(textBummerlsLostPlayer),ALL_GUI_ELEMENTS.push(textBummerlsLostOpponent),marriagesIndicator.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),forbiddenCardOverlay.forEach((t=>{ALL_GUI_ELEMENTS.push(t)})),ALL_GUI_ELEMENTS.push(exchangeTrumpCardButton),ALL_GUI_ELEMENTS.push(exitButton),ALL_GUI_ELEMENTS.forEach((t=>{svg.appendChild(t)}));for(let t=0;t<5;t++)cardsInHand[t].addEventListener("mouseover",(function(){cardHover(cardsInHand[t])}),!1),cardsInHand[t].addEventListener("mouseout",(function(){cardHoverOut(cardsInHand[t])}),!1),cardsInHand[t].addEventListener("click",(function(){movePlayCard(cardsInHand[t])}),!1);wonCardsFirstTrick.forEach((t=>{t.addEventListener("mouseover",(function(){toggleShowAllTricks()}),!1)})),wonCardsAllTricksDisplayed.forEach((t=>{t.addEventListener("mouseout",(function(){toggleHideAllTricks()}),!1),t.addEventListener("mouseover",(function(){toggleShowAllTricks()}),!1)})),exchangeTrumpCardButton.addEventListener("mouseover",(function(){hoverExchangeTrump(exchangeTrumpCardButton)}),!1),exchangeTrumpCardButton.addEventListener("mouseout",(function(){hoverOutExchangeTrump(exchangeTrumpCardButton)}),!1),exchangeTrumpCardButton.addEventListener("click",(function(){moveExchangeTrump()}),!1),trumpCard.addEventListener("mouseover",(function(){hoverCloseDeck(trumpCard)}),!1),trumpCard.addEventListener("mouseout",(function(){hoverOutCloseDeck(trumpCard)}),!1),trumpCard.addEventListener("click",(function(){moveCloseDeck()}),!1);for(let t=0;t<5;t++)forbiddenCardOverlay[t].addEventListener("mouseover",(function(){hoverForbiddenCardOverlay(forbiddenCardOverlay[t])}),!1),forbiddenCardOverlay[t].addEventListener("mouseout",(function(){hoverOutForbiddenCardOverlay(forbiddenCardOverlay[t])}),!1);const modal=document.querySelector(".modal"),modalCloseButton=document.querySelector(".modal-close-button"),modalExitGameButton=document.getElementById("modal-exit-btn"),modalContinueGameButton=document.getElementById("modal-continue-btn");function toggleModal(){modal.classList.toggle("show-modal")}function windowOnClick(t){t.target===modal&&toggleModal()}exitButton.addEventListener("click",toggleModal),exitButton.style.cursor="pointer",modalCloseButton.addEventListener("click",toggleModal),window.addEventListener("click",windowOnClick),modalContinueGameButton.addEventListener("click",toggleModal),socket.on("sessionStarting",(t=>{showElement(textAlert),textAlert.textContent="Waiting for other player...",textRoomId.textContent=`# ${t}`})),socket.on("sessionStateUpdate",(t=>{"started"===t.status&&(playSession=new PlaySession(t),textPlayerName.textContent=playSession.playerName,textOpponentName.textContent=playSession.opponentName)})),socket.on("sessionEnd",(t=>{showElement(textAlert),textAlert.textContent="Opponent left."})),socket.on("bummerlStart",(t=>{console.log("BUMMERL DTO:"),console.log(t),bummerl=new Bummerl(t),setupGameScreenWaiting(),updatePlayerAndOpponentGamePoints(),updatePlayerAndOpponentBummerlDots(),gameClient.canMakeMove=!0})),socket.on("bummerlStateUpdate",(t=>{bummerl=new Bummerl(t),updatePlayerAndOpponentGamePoints(),updatePlayerAndOpponentBummerlDots(),gameClient.canMakeMove=!0})),socket.on("dealStateUpdate",(t=>{updateClientGameState(t),updatePoints(deal.playerPoints),!1===t.leadOrResponse&&refreshPlayerOnTurnIndicator(deal.isThisPlayerOnTurn),console.log("dealStateUpdate"),updateMarriageIndicators(deal.cardsInHand,deal.marriagesInHand),updateExchangeTrumpButton(deal.cardsInHand,deal.trumpSuit),gameClient.canMakeMove=!0})),socket.on("dealStateUpdateAfterTrick",(t=>{toggleHideAllTricks(),updateClientGameState(t),delay(1200).then((()=>{refreshPlayerOnTurnIndicator(deal.isThisPlayerOnTurn),console.log("dealStateUpdateAfterTrick"),updatePoints(deal.playerPoints),hideElement(cardPlayedByPlayer),hideElement(cardPlayedByOpponent),hideElements(forbiddenCardOverlay),updateAllCardsInHand(deal.cardsInHand),updateOpponentCards(deal.cardsInHand.length),updateCardsStackedInDeck(deal.deckSize),updatePlayerTricks(deal.playerWonCards),updateOpponentTricks(deal.opponentWonCardsFirstTrick,deal.opponentTotalWonCardsNumber),updateMarriageIndicators(deal.cardsInHand,deal.marriagesInHand),updateExchangeTrumpButton(deal.cardsInHand,deal.trumpSuit),hideElement(marriagesCalledThisTrickByOpponent),gameClient.canMakeMove=!0}))})),socket.on("dealStateUpdateAfterClientRefresh",(t=>{deal=new Deal(t),updateClientGameState(t),updateClientGameScreen()})),socket.on("dealStateUpdateAfterTrumpExchange",(t=>{updateClientGameState(t),delay(300).then((()=>{putCardInElement(trumpCard,deal.trumpCard.name),updateAllCardsInHand(deal.cardsInHand),updateMarriageIndicators(deal.cardsInHand,deal.marriagesInHand),hideElement(marriagesCalledThisTrickByOpponent),updateExchangeTrumpButton(deal.cardsInHand,deal.trumpSuit),gameClient.canMakeMove=!0}))})),socket.on("dealStateUpdateAfterClosingDeck",(t=>{updateClientGameState(t),updateClientGameScreen(),gameClient.canMakeMove=!0})),socket.on("dealOverDTO",(t=>{t.isWinner?(bummerl.gamePointsPlayer+=t.gamePoints,textAlert.textContent=`You won! ( ${t.gamePoints} )`,updatePoints(t.playerPointsAtEndOfGame)):(bummerl.gamePointsOpponent+=t.gamePoints,textAlert.textContent=`You lost! ( ${t.gamePoints} )`),showElement(textAlert),updatePlayerAndOpponentGamePoints()})),socket.on("gameStart",(t=>{deal=new Deal(t);let e=100;deal.num>1&&(e=2500),delay(e).then((()=>{svg.removeChild(trumpCard),svg.appendChild(trumpCard),cardsInDeck.forEach((t=>{svg.removeChild(t)})),cardsInDeck.forEach((t=>{svg.appendChild(t)})),updateClientGameState(t),setupGameScreenStarted(),updateAllCardsInHand(deal.cardsInHand),updateMarriageIndicators(deal.cardsInHand,deal.marriagesInHand),hideElement(marriagesCalledThisTrickByOpponent),updateExchangeTrumpButton(deal.cardsInHand,deal.trumpSuit),gameClient.canMakeMove=!0}))})),socket.on("moveInvalidError",(t=>{console.log(t)})),socket.on("opponentMove",(t=>{hideElement(opponentCardsInHand[getRandomInt(5)]),t.marriagePoints>0&&(marriagesCalledThisTrickByOpponent.textContent=t.marriagePoints,showElement(marriagesCalledThisTrickByOpponent)),putCardInElement(cardPlayedByOpponent,t.cardName),showElement(cardPlayedByOpponent),"all"!==t.validRespondingCards&&disableForbiddenCards(deal.cardsInHand,t.validRespondingCards),gameClient.canMakeMove=!0}));